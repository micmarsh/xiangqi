<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Xiangqi</title>
  <script type="text/javascript" src="build/elm-runtime.js"></script>
  <script type="text/javascript" src="build/Xiangqi.js"></script>
</head>

<body>

<script>

function isGame(id) {
    return typeof id === 'string' && id.length === 5;
}
function newId() {
    return Math.random().toString(36).substring(3,8);
}

var currentId = location.hash.slice(1); //to get rid of the "#"

if (!isGame(currentId)) {
    location.hash = '#' + newId();
}

//TODO all this shit probably needs to be in its own elm module, but first look and little more and ask somewhere about how exactly to roll native things (maybe that native events thingy would be helpful, even though that neccesitates doing stuff here too)

var app = Elm.fullscreen(Elm.Xiangqi);

app.send('host', location.host);
app.send('hash', location.hash);

</script>

</body>

</html>
