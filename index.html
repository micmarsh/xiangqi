<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>Xiangqi</title>
  <script type="text/javascript" src="build/elm-runtime.js"></script>
  <script type="text/javascript" src="build/Xiangqi.js"></script>
</head>

<body>

<script>

(function(w){
    function isGame(id) {
        return typeof id === 'string' && id.length === 5;
    }
    function newId() {
        return Math.random().toString(36).substring(3,8);
    }

    var currentId = location.hash.slice(1); //to get rid of the "#"

    if (!isGame(currentId)) {
        location.hash = '#' + newId();
    }

    var app = Elm.fullscreen(Elm.Xiangqi);

    w.onhashchange = function (){ app.ports.hash.send(location.hash); }
    w.onhashchange()

})(window);

</script>

</body>

</html>
